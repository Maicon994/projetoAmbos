<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Ambos - Tela Inicial</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            margin: 0;
            padding: 0;
            text-align: center;
        }

        header {
            background-color: #ff7f27;
            color: white;
            padding: 15px;
            font-size: 22px;
            text-align: left;
        }

        header .menu {
            float: right;
            font-size: 16px;
        }

        .container {
            display: flex;
            justify-content: space-around;
            margin-top: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .box {
            width: 380px;
            background-color: #e6e6e6;
            padding: 15px;
            border-radius: 5px;
            text-align: left;
            min-height: 200px;
        }

        .box-title {
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 18px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            font-size: 13px;
        }

        th,
        td {
            border: 1px solid #bdbdbd;
            padding: 6px;
            text-align: left;
        }

        th {
            background: #d9d9d9;
        }

        .btn {
            margin-top: 15px;
            padding: 10px;
            width: 100%;
            background-color: #00c851;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>

<body>

    <header>
        <a id="voltar" href="login.html"
            style="background:#cccccc; padding:6px 10px; border-radius:4px; color:#000; text-decoration:none; margin-right:10px;">Logout</a>
        <a id="cadastrar" href="cadastrarPagamentos.html"
            style="background:#cccccc; padding:6px 10px; border-radius:4px; color:#000; text-decoration:none; margin-left:13px;">Cadastrar
            conta</a>
        <a id="cadastrar" href="cadastrarRecebimentos.html"
            style="background:#cccccc; padding:6px 10px; border-radius:4px; color:#000; text-decoration:none; margin-left:6px;">Cadastrar
            recebimento</a>
        Ambos
    </header>

    <h1 class="welcome">Bem-Vindo @claudio!!</h1>

    <div class="container">

        <div class="box">
            <div class="box-title">Recebimentos pendentes</div>
            <div id="listaRecebimentos"></div>
            <a href="recebimentos.html"><button class="btn">Gerenciar</button></a>
        </div>

        <div class="box">
            <div class="box-title">Pagamentos pendentes</div>
            <div id="listaPagamentos"></div>
            <a href="pagamentos.html"><button class="btn">Gerenciar</button></a>
        </div>

    </div>

    <script>
        function atualizarResumo() {
            const recebimentos = JSON.parse(localStorage.getItem("recebimentos")) || [];
            const pagamentos = JSON.parse(localStorage.getItem("pagamentos")) || [];

            const divReceber = document.getElementById("listaRecebimentos");
            const divPagar = document.getElementById("listaPagamentos");

            // Mostrar APENAS pendentes (pago === false)
            const recPend = recebimentos.filter(r => !r.pago);
            const pagPend = pagamentos.filter(p => !p.pago);

            if (recPend.length > 0) {
                let tabela = `<table><tr><th>Cliente</th><th>Valor</th><th>Data</th><th>Valor Final</th></tr>`;
                recPend.forEach(r => {
                    tabela += `<tr><td>${r.nome}</td><td>R$ ${Number(r.valor).toFixed(2)}</td><td>${r.dataVencimento || r.data}</td><td>R$ ${Number(r.valorFinal || r.valor).toFixed(2)}</td></tr>`;
                });
                tabela += `</table>`;
                divReceber.innerHTML = tabela;
            } else {
                divReceber.innerHTML = '<p>Nenhum recebimento pendente</p>';
            }

            if (pagPend.length > 0) {
                let tabela = `<table><tr><th>Fornecedor</th><th>Valor</th><th>Vencimento</th><th>Valor Final</th></tr>`;
                pagPend.forEach(p => {
                    tabela += `<tr><td>${p.fornecedor}</td><td>R$ ${Number(p.valor).toFixed(2)}</td><td>${p.dataVencimento}</td><td>R$ ${Number(p.valorFinal || p.valor).toFixed(2)}</td></tr>`;
                });
                tabela += `</table>`;
                divPagar.innerHTML = tabela;
            } else {
                divPagar.innerHTML = '<p>Nenhuma conta pendente</p>';
            }
        }

        atualizarResumo();
    </script>

</body>

</html>